<!DOCTYPE html>
<html>

<link href="https://fonts.googleapis.com/css?family=Julius+Sans+One|Nunito:600" rel="stylesheet">
<head>
  
  <title><%= @page_title || "Quizme" %></title>
  
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>


  <% if !flash.empty? %>
    <ul id="temporary_background" class="navbar navbar-static-top">
  <% else %>
    <ul class="navbar navbar-static-top">
  <% end %>

    <% if session[:username] == nil %>
    
      <li><%= link_to "QuizMe", access_home_path, :class => "title" %></li>
      <% if !flash.empty? %>
        <% flash.each do |key, value| %>
          <%= content_tag(:div, value, :class => "flash #{key}", :id => "notice") %>
        <% end %>
      <% end %>

      <li style="float:right"><%= link_to "Sign Up", access_accountType_path, :class => "active button" %></li>
      <li style="float:right"><%= link_to "Login", access_login_path, :class => "active" %></li>
    
    <% else %>
      <% if session[:user_type] == "teacher" %>
        <li><a href="/courses" class="title">QuizMe</a></li>
        <li><a href="/courses">Courses</a></li>
        <li><%= link_to "Students", students_path %></li>
        <% if !flash.empty? %>
          <% flash.each do |key, value| %>
            <%= content_tag(:div, value, :class => "flash #{key}", :id => "notice") %>
          <% end %>
        <% end %>
        
        <li style="float:right"><a class="active" href="/access/logout">Logout</a></li>
        <li style="float:right"> <%= link_to session[:username], Teacher.find_by(:username => session[:username]) %> </li>
      
      <% elsif session[:user_type] == "student" %>
        <li><%= link_to "QuizMe", course_path(Student.find(session[:user_id]).course_id), :class => "title" %></li>
        <li><%= link_to "Course", course_path(Student.find(session[:user_id]).course_id) %></li>
        <li><%= link_to "Teacher",  teacher_path(Student.find(session[:user_id]).course.teacher_id) %> </li>
        <% if !flash.empty? %>
          <% flash.each do |key, value| %>
            <%= content_tag(:div, value, :class => "flash #{key}", :id => "notice") %>
          <% end %>
        <% end %>
        
        <li style="float:right"><a class="active" href="/access/logout">Logout</a></li>
        <li style="float:right"> <%= link_to session[:username], Student.find_by(:username => session[:username]) %> </li>
      <% end %>
      
    <% end %>
    
  </ul>


</head>
<body>

    <%= yield %>

<script>
  $(document).ready(function() {

    setTimeout(function(){
      $('#notice').fadeOut("slow"), function() {
        $(this).remove();
      };
      
    }, 2000);
  });
</script>

</body>
</html>
